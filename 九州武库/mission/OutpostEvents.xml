<?xml version="1.0" encoding="utf-8"?>
<Randomevents>
  <EventPrefabs>
    <!--站点无敌-->
    <ScriptedEvent identifier="tsm_indestructible_wall">
      <!-- StructurePrefabs.xml -->
      <TagAction criteria="structureidentifier:ff_x_wall" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:ff_y_wall" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella25" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella26" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassd" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglasse" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassf" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:topwindow" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:verticalwindow" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <!-- OutpostStructurePrefabs.xml -->
      <TagAction criteria="structureidentifier:icewall" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:icewall90" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <!-- StructurePrefabsWrecked.xml -->
      <TagAction criteria="structureidentifier:ff_x_wall_wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella07wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella21wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshella23wrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:shella26degwrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassdwrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassewrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <TagAction criteria="structureidentifier:sshellaglassfwrecked" tag="targetwall" submarinetype="outpost" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="targetwall">
        <StatusEffect target="This" indestructible="true" />
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_forsaken">
      <TagAction Criteria="speciesname:Human" Tag="enemy" Team="None" IgnoreIncapacitatedCharacters="false" />
      <TagAction Criteria="hull" Tag="anyhull" SubmarineType="Player" />
      <Label Name="waitforintruder" />
      <ClearTagAction Tag="defender" />
      <ClearTagAction Tag="intruder" />
      <ClearTagAction Tag="targetidcard" />
      <TagAction Criteria="eventtag:enemy" Tag="defender" SubmarineType="Outpost" IgnoreIncapacitatedCharacters="false" />
      <TriggerAction Target1Tag="defender" Target2Tag="anyhull" ApplyToTarget1="intruder" DisableInCombat="false" DisableIfTargetIncapacitated="false" />
      <StatusEffectAction TargetTag="intruder">
        <StatusEffect target="This">
          <LuaHook name="intruder.SetOrder" />
        </StatusEffect>
      </StatusEffectAction>
      <CheckItemAction TargetTag="intruder" ItemIdentifiers="idcard" ApplyTagToItem="targetidcard" />
      <StatusEffectAction targettag="targetidcard">
        <StatusEffect target="This" SubmarineSpecificID="0" setvalue="true" />
      </StatusEffectAction>
      <GoTo Name="waitforintruder" />
    </ScriptedEvent>
    <!--站点清除画皮-->
    <ScriptedEvent identifier="tsm_remove_husk">
      <TagAction criteria="itemtag:reactor" tag="reactor" submarinetype="Outpost" chooserandom="true" />
      <StatusEffectAction targettag="reactor">
        <StatusEffect target="NearbyCharacters" range="1000000" conditionalcomparison="and">
          <Conditional isonplayerteam="false" />
          <Conditional isoriginallyonplayerteam="false" />
          <Conditional IsHusk="true" />
          <RemoveCharacter />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <!--任务中刷出邱小姐-->
    <ScriptedEvent identifier="tsm_srm_onactive">
      <CheckDataAction identifier="tsm_save_missqiu_outpost" condition="eq active" forcestring="true"><!--检查存档标记-->
      <Success>
        <TagAction criteria="tsm_restarget" tag="TSM_customisation_qiuwu" ignoreincapacitatedcharacters="false"/><!--标记目标-->
        <TagAction criteria="player" tag="player" ignoreincapacitatedcharacters="false"  /><!--标记玩家-->
        <NPCWaitAction npctag="TSM_customisation_qiuwu" wait="true" /><!--让AI站着-->
        <TriggerAction target1tag="TSM_customisation_qiuwu" target2tag="player" applytotarget1="TSM_customisation_qiuwu" applytotarget2="trigger_player" type="Inside" radius="250" disableincombat="true" disableiftargetincapacitated="true" waitforinteraction="true"/><!--触发对话-->
        <ConversationAction text="tsm_srm_text.rescuetargetmessage1" speakertag="TSM_customisation_qiuwu" targettag="trigger_player" fadetoblack="true" endeventifinterrupted="true" dialogtype="Mission" continueconversation="false" continueautomatically="true" ><!--对话体-->
        <Option text="tsm_srm_text.arrested">
          <NPCChangeTeamAction npctag="TSM_customisation_qiuwu" teamid="Team1" /><!--设置AI为己方-->
          <NPCFollowAction npctag="TSM_customisation_qiuwu" targettag="trigger_player" follow="true" maxtargets="1" /><!--强制AI跟随-->
          <SetDataAction operation="Set" value="accomplished" identifier="tsm_save_missqiu_outpost"/><!--设置存档标记-->
          <TriggerEventAction identifier="tsm_spawnrescuednpc" nextround="true" /><!--触发站点生成-->
        </Option>
        </ConversationAction>
      </Success>
      </CheckDataAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_spawnrescuednpc">
      <CheckDataAction identifier="tsm_save_missqiu_outpost" condition="eq accomplished" forcestring="true" ><!--验证存档标记-->
      <Success>
        <SpawnAction npcsetidentifier="TSM_mission_npc" npcidentifier="TSM_customisation_qiuwu" lootingisstealing="false" targettag="TSM_customisation_qiuwu" spawnlocation="Outpost" teamid="FriendlyNPC" allowduplicates="false" amount="1" /><!--触发站点生成-->
        <SetDataAction operation="Set" value="end" identifier="tsm_save_missqiu_outpost" /><!--设置存档标记-->
        <ConversationAction text="tsm_srm_text.thanks1" speakertag="TSM_customisation_qiuwu" invokertag="trigger_player" fadetoblack="false" >
          <Option text="tsm_srm_text.answer1">
          </Option>
        </ConversationAction>
      </Success>
      </CheckDataAction>
    </ScriptedEvent>
    <!--ars探员-->
    <!--ScriptedEvent identifier="TSM_convertible_npc">
        <TagAction criteria="player" tag="player" />
        <SpawnAction npcsetidentifier="TSM_convertible_npc" npcidentifier="TSM_convertible_npc" targettag="TSM_convertible_npc" spawnlocation="Outpost" targetmoduletags="airlock" />
        <Label name="beginningofthejourney" />
        <NPCWaitAction npctag="TSM_convertible_npc" wait="false"/>
        <TriggerAction target1tag="TSM_convertible_npc" target2tag="player" applytotarget2="triggerer_player" radius="200" waitforinteraction="true"/>
        <ConversationAction text="tsm.t1" targettag="triggerer_player" >
          <Option text="tsm.arsrw">
            <ConversationAction text="tsm_haulagecombat_1.c1" targettag="triggerer_player" dialogtype="Small">
              <Option text="tsm.ars.1">
                <ConversationAction text="tsm.ars.11" targettag="triggerer_player" dialogtype="Small" />
                <MissionAction missiontag="haulage_combat"/>
                <GoTo name="beginningofthejourney" />
              </Option>
              <Option text="tsm.ars.2">
                <ConversationAction text="tsm.ars.22" targettag="triggerer_player" dialogtype="Small" />
                <ClearTagAction tag="triggerer_player" />
                <GoTo name="beginningofthejourney"/>
              </Option>
            </ConversationAction>
          </Option>
          <Option text="tsm.other">
            <ConversationAction text="tsm.urgent" targettag="triggerer_player" dialogtype="Small"/>
            <CheckDataAction identifier="tsm_save_missqiu_outpost" condition="eq active" forcestring="true">
              <Success>
                <ConversationAction text="tsm.urgent_save_no" targettag="triggerer_player"/>
                <ClearTagAction tag="triggerer_player" />
                <GoTo name="beginningofthejourney" />
              </Success>
              <Failure>
                <ConversationAction text="tsm.urgent" targettag="triggerer_player" dialogtype="Small">
                  <Option text="tsm.save_yes">
                  <ConversationAction text="tsm.save_yes_1" targettag="triggerer_player" dialogtype="Small" />
                  <MissionAction missionidentifier="tsm_adventists_save" requiredfaction="tsm" createlocationifnotfound="true"  />
                  <SetDataAction operation="Set" value="active" identifier="tsm_save_missqiu_outpost"/>
                  <GoTo name="beginningofthejourney" />
                  </Option>
                </ConversationAction>
              </Failure>
            </CheckDataAction>
          </Option>
          <Option text="tsm.dh">
            <ConversationAction text="tsm.bg1" targettag="triggerer_player">
              <Option text="tsm.bg">
                <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_bg_licences" amount="1">
                  <Success>
                    <RemoveItemAction targettag="triggerer_player" itemidentifiers="tsm_bg_licences" amount="1"/>
                    <ConversationAction text="tsm.bg1" targettag="triggerer_player" />
                    <SpawnAction itemidentifier="tsm_triton_bag" targetinventory="triggerer_player"/>
                    <ClearTagAction tag="triggerer_player" />
                    <GoTo name="beginningofthejourney" />
                  </Success>
                  <Failure>
                    <ConversationAction text="tsm.d2" targettag="triggerer_player"/>
                    <ClearTagAction tag="triggerer_player" />
                    <GoTo name="beginningofthejourney" />
                  </Failure>
                </CheckItemAction>
              </Option>
              <Option text="tsm.ammo_resupply">
                <CheckMoneyAction amount="5000">
                  <Success>
                    <MoneyAction amount="-5000" />
                    <ConversationAction targettag="triggerer_player" text="tsm.ammo_resupply_next" />
                    <SpawnAction itemidentifier="tsm_ammunition_resupply" targetinventory="triggerer_player" />
                    <GoTo name="beginningofthejourney" />
                  </Success>
                  <Failure>
                    <ConversationAction targettag="triggerer_player" text="tsm.next2" />
                    <GoTo name="beginningofthejourney" />
                  </Failure>
                </CheckMoneyAction>
              </Option>
              <Option text="tsm.wait">
                <ConversationAction text="tsm.d1" targettag="triggerer_player" />
                <ClearTagAction tag="triggerer_player" />
                <GoTo name="beginningofthejourney" />
              </Option>
            </ConversationAction>
          </Option>
          <Option text="tsm.wait">
            <ConversationAction text="tsm.wait1" targettag="triggerer_player" dialogtype="Small"/>
            <ClearTagAction tag="triggerer_player" />
            <GoTo name="beginningofthejourney" />
          </Option>
        </ConversationAction>
        <NPCWaitAction npctag="TSM_convertible_npc" wait="false" />
    </ScriptedEvent-->
    <ScriptedEvent identifier="tsm_opdeco_hrflyers_1" commonness="10">
      <TagAction criteria="player" tag="player" />
      <TagAction criteria="itemidentifier:opdeco_hrflyers" tag="potentialflyers" submarinetype="outpost" />
      <TriggerAction target1tag="potentialflyers" target2tag="player" applytotarget2="triggerer_player" radius="150" waitforinteraction="true" />
      <ConversationAction targettag="triggerer_player" text="tsm_opdeco_hrflyers_1.c1" eventsprite="BombScare1">
        <Option text="tsm_opdeco_hrflyers_1.o1">
          <ConversationAction targettag="triggerer_player" text="tsm_opdeco_hrflyers_1.o1.c1" eventsprite="BombScare1" />
          <ConversationAction text="tsm_opdeco_hrflyers_1.o2" dialogtype="Small" targettag="triggerer_player" />
          <MissionAction missiontag="tsm_escort" />
        </Option>
      </ConversationAction>
    </ScriptedEvent>
    <!--站点增援-->
    <!--联盟-->
    <!--快速反应-->
    <ScriptedEvent identifier="tsm_qrf_buff">
      <TagAction criteria="humanprefabidentifier:rapidreaction_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_elite" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_elite_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_breaker" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:moon_shadow" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy">
        <StatusEffect target="This">
          <Affliction identifier="tsm_qrf_stun" strength="50" />
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_stun" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_qrf_buff_other">
      <TagAction criteria="humanprefabidentifier:rapidreaction_leader" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_elite" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_elite_p" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_breaker" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:rapidreaction_p" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:moon_shadow" tag="enemy_elite" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_leader">
        <StatusEffect target="This">
          <Affliction identifier="tsm_qrf_jia_buff" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_elite">
        <StatusEffect target="This">
          <Affliction identifier="tsm_qrf_yi_buff" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_pt">
        <StatusEffect target="This">
          <Affliction identifier="tsm_qrf_bing_buff" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_reinforcement_buff">
      <TagAction criteria="humanprefabidentifier:rapidreaction_reinforcement" tag="enemy_reinforcement" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_reinforcement">
        <StatusEffect target="This" enabledespawn="true">
          <Affliction identifier="tsm_qrf_jia_buff" strength="50" />
          <Affliction identifier="tsm_ai_stun" strength="50" />
          <Affliction identifier="tsm_qrf_stun" strength="50" />
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
    </ScriptedEvent>
    <!--占领军-->
    <ScriptedEvent identifier="tsm_occupation_buff">
      <TagAction criteria="humanprefabidentifier:occupation_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_elite" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_elite_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_ex" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_fire" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_qiuwu" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_tarler" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy" >
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_occupation_buff_other">
      <TagAction criteria="humanprefabidentifier:occupation_leader" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_elite" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_elite_p" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_ex" tag="enemy_ex" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_ex_p" tag="enemy_ex" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_p" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_fire" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_qiuwu" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:occupation_tarler" tag="enemy_elite" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_leader">
        <StatusEffect target="This">
          <Affliction identifier="tsm_occupation_jia_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <Affliction identifier="tsm_ai_stun_5" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_elite">
        <StatusEffect target="This">
          <Affliction identifier="tsm_occupation_yi_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <Affliction identifier="tsm_ai_stun_2" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_pt">
        <StatusEffect target="This">
          <Affliction identifier="tsm_occupation_bing_buff" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_ex">
        <StatusEffect target="This">
          <Affliction identifier="tsm_occupation_bing_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_combat_occupation_event">
      <TagAction criteria="crew" tag="crew" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew">
        <Failure>
          <Goto name="waitforspotting" />
        </Failure>
      </CheckVisibilityAction>
      <WaitAction time="4" />
      <ConversationAction text="tsm_combat_occupation_event.1" dialogtype="Small" />
      <Label name="delay" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="1" />
        </Success>
        <Failure>
          <RNGAction chance="0.5">
            <Success>
              <WaitAction time="0.5" />
            </Success>
            <Failure>
              <WaitAction time="1.5" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <GoTo name="delay" maxtimes="400" />
          <SpawnAction npcsetidentifier="occupation_npcs" npcidentifier="occupation_leader" lootingisstealing="false" targettag="occupation" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <StatusEffectAction targettag="occupation"  enabledespawn="true">
            <StatusEffect target="This">
              <Sound file="%ModDir%/ogg/Blood for the Blood.ogg" range="10000" />
            </StatusEffect>
          </StatusEffectAction>
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="occupation_npcs" npcidentifier="occupation_leader" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="occupation_npcs" npcidentifier="occupation_leader" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="occupation_npcs" npcidentifier="occupation_leader" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="occupation_npcs" npcidentifier="occupation_leader" targettag="occupation" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <TagAction criteria="humanprefabidentifier:rapidreaction_reinforcement" tag="enemy_reinforcement" continueifnotargetsfound="true" />
          <TagAction criteria="humanprefabidentifier:occupation_leader" tag="enemy_reinforcement" continueifnotargetsfound="true" />
          <StatusEffectAction targettag="enemy_reinforcement">
          <StatusEffect target="This" enabledespawn="true">
          <Affliction identifier="tsm_qrf_jia_buff" strength="50" />
          <Affliction identifier="tsm_ai_stun" strength="50" />
          <Affliction identifier="tsm_qrf_stun" strength="50" />
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_stun_5" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <Affliction identifier="tsm_ai_stun_2" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <!--贝奥武夫-->
    <ScriptedEvent identifier="tsm_beowulf_buff">
      <TagAction criteria="humanprefabidentifier:beowulf_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_elite" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_elite_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_breaker" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_fire" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_ex" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_ex_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_sl" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_fox" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_beowulf_buff_other">
      <TagAction criteria="humanprefabidentifier:beowulf_leader" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_elite" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_elite_p" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_breaker" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_fire" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_ex" tag="enemy_ex" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_ex_p" tag="enemy_ex" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_p" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_sl" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:beowulf_fox" tag="enemy_leader" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_leader">
        <StatusEffect target="This">
          <Affliction identifier="tsm_beowulf_jia_buff" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <Affliction identifier="tsm_ai_stun_5" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_elite">
        <StatusEffect target="This">
          <Affliction identifier="tsm_beowulf_yi_buff" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_pt">
        <StatusEffect target="This">
          <Affliction identifier="tsm_beowulf_bing_buff" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_ex">
        <StatusEffect target="This">
          <Affliction identifier="tsm_occupation_bing_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_combat_beowulf_event">
      <TagAction criteria="crew" tag="crew" />
      <TagAction criteria="player" tag="crew" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew">
        <Failure>
          <Goto name="waitforspotting" />
        </Failure>
      </CheckVisibilityAction>
      <WaitAction time="3" />
      <StatusEffectAction targettag="crew">
        <StatusEffect target="This" enabledespawn="true">
          <Sound file="%ModDir%/mission/beowulf_reinforcement.ogg" range="10000" />
        </StatusEffect>
      </StatusEffectAction>
      <Label name="delay" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="1" />
        </Success>
        <Failure>
          <RNGAction chance="0.5">
            <Success>
              <WaitAction time="0.5" />
            </Success>
            <Failure>
              <WaitAction time="1.5" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <GoTo name="delay" maxtimes="20" />
          <SpawnAction npcsetidentifier="beowulf_npcs" npcidentifier="beowulf_leader" lootingisstealing="false" targettag="beowulf" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <StatusEffectAction targettag="crew">
           <StatusEffect target="This" enabledespawn="true">
          <Sound file="%ModDir%/mission/beowulf_reinforcement_arrived.ogg" range="10000" />
        </StatusEffect>
      </StatusEffectAction>
          <StatusEffectAction targettag="beowulf">
            <StatusEffect target="This" enabledespawn="true" delay="2">
              <Sound file="%ModDir%/ogg/phonkghost.ogg" range="10000" />
            </StatusEffect>
          </StatusEffectAction>
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="beowulf" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="beowulf" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="beowulf" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="beowulf" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="beowulf" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="beowulf" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_reinforcement" targettag="beowulf" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="beowulf_npcs" npcidentifier="beowulf_leader" lootingisstealing="false" targettag="beowulf" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <TagAction criteria="humanprefabidentifier:rapidreaction_reinforcement" tag="enemy_reinforcement" continueifnotargetsfound="true" />
          <TagAction criteria="humanprefabidentifier:beowulf_leader" tag="enemy_reinforcement" continueifnotargetsfound="true" />
          <StatusEffectAction targettag="enemy_reinforcement">
          <StatusEffect target="This" enabledespawn="true">
          <Affliction identifier="tsm_qrf_jia_buff" strength="50" />
          <Affliction identifier="tsm_ai_stun" strength="50" />
          <Affliction identifier="tsm_qrf_stun" strength="50" />
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_beowulf_bb">
      <TagAction criteria="crew" tag="player" continueifnotargetsfound="true"/>
      <TagAction criteria="bot" tag="player" continueifnotargetsfound="true"/>
      <TagAction criteria="player" tag="player" continueifnotargetsfound="true"/>
      <StatusEffectAction targettag="player">
        <StatusEffect target="This">
          <Affliction identifier="tsm_beowulf_bb" strength="10" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <!--串扰-->
    <ScriptedEvent identifier="tsm_crosstalk_buff">
      <TagAction criteria="humanprefabidentifier:crosstalk_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:crosstalk_leader_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:crosstalk" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:crosstalk_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:crosstalk_tianjie" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:crosstalk_ckhs233" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_crosstalk_buff_other">
      <TagAction criteria="humanprefabidentifier:crosstalk_leader" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:crosstalk_tianjie" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:crosstalk_ckhs233" tag="enemy_leader" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_leader">
        <StatusEffect target="This">
          <Affliction identifier="tsm_crosstalk_jia_buff" strength="50" />
          <Affliction identifier="tsm_ai_stun_2" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
    </ScriptedEvent>
    <!--普通-->
    <ScriptedEvent identifier="tsm_pt_buff">
      <TagAction criteria="humanprefabidentifier:coalition_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:coalition_leader_e" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:coalition" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:coalition_themohavemailman" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:coalition_AloneFllen" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:coalition_e" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:separatists_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:separatists_rbq" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:separatists" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:separatists_e" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:separatists_000032" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <!--反抗军-->
    <!--野火-->
    <ScriptedEvent identifier="tsm_yehuo_buff">
      <TagAction criteria="humanprefabidentifier:yehuo_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_elite" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_elite_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_ex" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_reinforcement" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_leader_cce" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy" >
        <StatusEffect target="This" enabledespawn="true">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_yehuo_buff_other">
      <TagAction criteria="humanprefabidentifier:yehuo_leader" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_elite" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_elite_p" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_p" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_ex" tag="enemy_ex" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_reinforcement" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:yehuo_leader_cce" tag="enemy_leader" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_leader">
        <StatusEffect target="This">
          <Affliction identifier="tsm_yehuo_jia_buff" strength="50" />
          <Affliction identifier="tsm_ai_stun_5" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_elite">
        <StatusEffect target="This">
          <Affliction identifier="tsm_yehuo_yi_buff" strength="50" />
          <Affliction identifier="tsm_ai_stun_2" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_pt">
        <StatusEffect target="This">
          <Affliction identifier="tsm_yehuo_bing_buff" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_ex">
        <StatusEffect target="This">
          <Affliction identifier="tsm_occupation_bing_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_combat_yehuo_event">
      <TagAction criteria="crew" tag="crew" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew">
        <Failure>
          <Goto name="waitforspotting" />
        </Failure>
      </CheckVisibilityAction>
      <WaitAction time="3" />
      <ConversationAction text="tsm_combat_yehuo_event.1" dialogtype="Small" />
      <Label name="delay" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.8" />
        </Success>
        <Failure>
          <RNGAction chance="0.5">
            <Success>
              <WaitAction time="0.4" />
            </Success>
            <Failure>
              <WaitAction time="1.2" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <GoTo name="delay" maxtimes="400" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_leader" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <StatusEffectAction targettag="yehuo" enabledespawn="true">
            <StatusEffect target="This">
              <Sound file="%ModDir%/ogg/red rock for mother Russia.ogg" range="10000" />
            </StatusEffect>
          </StatusEffectAction>
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_reinforcement" lootingisstealing="false" targettag="separatists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_leader" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_leader" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="yehuo_npcs" npcidentifier="yehuo_leader" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <TagAction criteria="humanprefabidentifier:yehuo_reinforcement" tag="enemy_reinforcement" continueifnotargetsfound="true" />
          <TagAction criteria="humanprefabidentifier:yehuo_leader" tag="enemy_reinforcement_jia" continueifnotargetsfound="true" />
          <StatusEffectAction targettag="enemy_reinforcement" >
          <StatusEffect target="This" enabledespawn="true">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_stun_2" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_yehuo_yi_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
          </StatusEffect>
         </StatusEffectAction>
      <StatusEffectAction targettag="enemy_reinforcement_jia" >
        <StatusEffect target="This" enabledespawn="true">
        <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
        <Affliction identifier="tsm_ai_bleeding" strength="50" />
        <Affliction identifier="tsm_ai_stun_5" strength="50" />
        <Affliction identifier="tsm_yehuo_jia_buff" strength="50" />
        <Affliction identifier="tsm_ai_tk" strength="50" />
        <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
    </StatusEffectAction>
    </ScriptedEvent>
    <!--突袭者-->
    <ScriptedEvent identifier="tsm_anonymous_buff">
      <TagAction criteria="humanprefabidentifier:Anonymous_leader" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous_elite" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous_elite_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous_p" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_anonymous_buff_other">
      <TagAction criteria="humanprefabidentifier:Anonymous_leader" tag="enemy_leader" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous_elite" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous_elite_p" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:Anonymous_p" tag="enemy_elite" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_leader">
        <StatusEffect target="This">
          <Affliction identifier="tsm_anonymous_jia_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <Affliction identifier="tsm_ai_stun_2" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_elite">
        <StatusEffect target="This">
          <Affliction identifier="tsm_anonymous_yi_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <!--奇迹之海-->
    <!--咏叹调-->
    <ScriptedEvent identifier="tsm_combat_buff">
      <TagAction criteria="humanprefabidentifier:tsm_jz" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_pgc" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_advanced" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_sundawn" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_elite" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_elite_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_p" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_ml" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_Finianna" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_sm" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_csms" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_combat_buff_other">
      <TagAction criteria="humanprefabidentifier:tsm_jz" tag="enemy_jz" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_pgc" tag="enemy_jz" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_advanced" tag="enemy_advanced" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_sundawn" tag="enemy_advanced" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_Finianna" tag="enemy_advanced" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_elite" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_elite_p" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_p" tag="enemy_pt" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_ml" tag="enemy_advanced" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_sm" tag="enemy_jz" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_csms" tag="enemy_advanced" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_jz">
        <StatusEffect target="This">
          <Affliction identifier="tsm_jz_buff" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <Affliction identifier="tsm_ai_stun_5" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_advanced">
        <StatusEffect target="This">
          <Affliction identifier="tsm_advanced_buff" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <Affliction identifier="tsm_ai_stun_2" strength="50" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_pt">
        <StatusEffect target="This">
          <Affliction identifier="tsm_pt_buff" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <!--猫科-->
    <ScriptedEvent identifier="tsm_outpost_combat">
      <TagAction criteria="humanprefabidentifier:tsm_outpost_combat_3" tag="enemy_outpost_combat" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_outpost_combat_naiya" tag="enemy_outpost_combat" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_outpost_combat">
        <StatusEffect target="This" enabledespawn="true">
          <Affliction identifier="tsm_ai_stun" strength="50" />
          <Affliction identifier="tsm_eyi_combat" strength="50" />
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_eyi_rev" strength="50" />
          <Affliction identifier="tsm_eyi_defend" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_combat_buff_cat">
      <TagAction criteria="humanprefabidentifier:tsm_military_advisers" tag="enemy_military_advisers" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_military_advisers" tag="enemy_soldier" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:fkj_elite" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:fkj_elite_p" tag="enemy_elite" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:tsm_soldier_FFFFFour" tag="enemy_soldier" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy_military_advisers">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <Affliction identifier="tsm_ma_buff" strength="50" />
          <Affliction identifier="tsm_ai_stun_5" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1,specops" />
        </StatusEffect>
        <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_soldier">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_sec_buff" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
        </StatusEffect>
      </StatusEffectAction>
      <StatusEffectAction targettag="enemy_elite">
        <StatusEffect target="This">
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <Affliction identifier="tsm_yehuo_yi_buff" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_combat_tsm_event">
      <TagAction criteria="crew" tag="crew" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew">
        <Failure>
          <Goto name="waitforspotting" />
        </Failure>
      </CheckVisibilityAction>
      <WaitAction time="3" />
      <ConversationAction text="tsm_combat_tsm_event.1" dialogtype="Small" />
      <Label name="delay" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.8" />
        </Success>
        <Failure>
          <RNGAction chance="0.5">
            <Success>
              <WaitAction time="0.4" />
            </Success>
            <Failure>
              <WaitAction time="1.2" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <GoTo name="delay" maxtimes="300" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <StatusEffectAction targettag="TSM" enabledespawn="true">
            <StatusEffect target="This">
              <Sound file="%ModDir%/ogg/四面楚歌.ogg" range="10000" />
            </StatusEffect>
          </StatusEffectAction>
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_3" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="Combat_Npc_Customisation" npcidentifier="tsm_outpost_combat_naiya" lootingisstealing="false" targettag="TSM" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <TagAction criteria="humanprefabidentifier:tsm_outpost_combat_3" tag="enemy_outpost_combat" continueifnotargetsfound="true" />.
          <TagAction criteria="humanprefabidentifier:tsm_outpost_combat_naiya" tag="enemy_outpost_combat" continueifnotargetsfound="true" />
          <StatusEffectAction targettag="enemy_outpost_combat">
          <StatusEffect target="This" enabledespawn="true">
          <Affliction identifier="tsm_ai_stun" strength="50" />
          <Affliction identifier="tsm_eyi_combat" strength="50" />
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_tk" strength="50" />
          <Affliction identifier="tsm_eyi_rev" strength="50" />
          <Affliction identifier="tsm_eyi_defend" strength="50" />
          <Affliction identifier="tsm_ai_fire" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          </StatusEffect>
            <StatusEffect target="This" UseHealthWindow="false" />
      </StatusEffectAction>
    </ScriptedEvent>
    <!--无限增援-->
    <ScriptedEvent identifier="lm_reinforcement_event">
      <TagAction criteria="crew" tag="crew" />
      <Label name="beginning" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew">
        <Failure>
          <Goto name="waitforspotting" />
        </Failure>
      </CheckVisibilityAction>
      <ConversationAction text="占领军发现了你，并呼叫了增援，快速反应部队将在10分钟后抵达。" dialogtype="Small" />
      <WaitAction time="10" />
      <CheckConditionalAction targettag="bot" TeamID="None" IsIncapacitated="false" logicaloperator="And">
        <Success>
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_breaker" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_breaker" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_breaker" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="rapidreaction_npcs" npcidentifier="rapidreaction_breaker" lootingisstealing="false" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <ConversationAction text="增援到了..." dialogtype="Small" />
          <Goto name="beginning" />
        </Success>
        <Failure>
          <ConversationAction text="占领军都死了，不会有后续的增援了..." dialogtype="Small" />
        </Failure>
      </CheckConditionalAction>
    </ScriptedEvent>
    <!--地狱泅渡-->
    <ScriptedEvent identifier="tsm_combat_adventists_event">
      <TagAction criteria="crew" tag="crew" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew">
        <Failure>
          <Goto name="waitforspotting" />
        </Failure>
      </CheckVisibilityAction>
      <WaitAction time="10" />
      <Label name="delay" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.8" />
        </Success>
        <Failure>
          <RNGAction chance="0.5">
            <Success>
              <WaitAction time="0.4" />
            </Success>
            <Failure>
              <WaitAction time="1.2" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <GoTo name="delay" maxtimes="5" />
          <SpawnAction npcsetidentifier="tsm_adventists_npcs" npcidentifier="adventists_elite" lootingisstealing="false" targettag="adventists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_adventists_npcs" npcidentifier="adventists_elite" lootingisstealing="false" targettag="adventists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_adventists_npcs" npcidentifier="adventists_elite" lootingisstealing="false" targettag="adventists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_adventists_npcs" npcidentifier="adventists_elite" lootingisstealing="false" targettag="adventists" spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
          <SpawnAction npcsetidentifier="tsm_adventists_npcs" npcidentifier="adventists_elite" lootingisstealing="false" targettag="adventists"  spawnlocation="outpost" TeamID="None" allowinplayerview="false" />
          <WaitAction time="0.1" />
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_combat_adventists_event_tsm">
      <TagAction criteria="crew" tag="crew" />
      <TagAction criteria="bot" tag="bot" />
      <Label name="waitforspotting" />
      <WaitAction time="1" />
      <CheckVisibilityAction entitytag="bot" excludedentitytag="crew" targettag="crew">
        <Failure>
          <Goto name="waitforspotting" />
        </Failure>
      </CheckVisibilityAction>
      <WaitAction time="1" />
      <ConversationAction text="tsm_combat_adventists_event_tsm.1" />
      <Label name="delay" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.8" />
        </Success>
        <Failure>
          <RNGAction chance="0.5">
            <Success>
              <WaitAction time="0.4" />
            </Success>
            <Failure>
              <WaitAction time="1.2" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <GoTo name="delay" maxtimes="5" />
      <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_2" lootingisstealing="true" targettag="TSM" spawnpointtag="banditleader" spawnlocation="outpost" TeamID="Team1" allowinplayerview="false" CanInventoryBeAccessed="false" />
      <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_2" lootingisstealing="true" targettag="TSM" spawnpointtag="banditleader" spawnlocation="outpost" TeamID="Team1" allowinplayerview="false" CanInventoryBeAccessed="false" />
      <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_2" lootingisstealing="true" targettag="TSM" spawnpointtag="banditleader" spawnlocation="outpost" TeamID="Team1" allowinplayerview="false" CanInventoryBeAccessed="false" />
      <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_2" lootingisstealing="true" targettag="TSM" spawnpointtag="banditleader" spawnlocation="outpost" TeamID="Team1" allowinplayerview="false" CanInventoryBeAccessed="false" />
      <SpawnAction npcsetidentifier="tsm_npcs" npcidentifier="tsm_outpost_combat_2" lootingisstealing="true" targettag="TSM" spawnpointtag="banditleader" spawnlocation="outpost" TeamID="Team1" allowinplayerview="false" CanInventoryBeAccessed="false" />
          <CombatAction combatmode="Offensive" npctag="TSM" enemytag="adventists" isinstigator="false" guardreaction="arrest" witnessreaction="retreat" />
    </ScriptedEvent>
    <!--牛仔对决-->
    <ScriptedEvent identifier="tsm_nz_combat">
      <TagAction criteria="humanprefabidentifier:gunner_Passive" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:gunner_Patrol" tag="enemy" continueifnotargetsfound="true" />
      <TagAction criteria="humanprefabidentifier:gunner_solomon" tag="enemy" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="enemy">
        <StatusEffect target="This">
          <Affliction identifier="tsm_nz_buff" strength="50" />
          <Affliction identifier="tsm_ai_asphyxiating_pressure" strength="50" />
          <Affliction identifier="tsm_ai_bleeding" strength="50" />
          <GiveTalentInfo giverandom="false" talentidentifiers="tsm_lightningwizard_1" />
          <GiveTalentInfo giverandom="false" talentidentifiers="specops" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <!--暗夜降临-->
    <ScriptedEvent identifier="tsm_darkstormynight">
      <TagAction criteria="player" tag="player" />
      <ConversationAction text="tsm_darkstormynight.1" targettag="player" fadetoblack="true" continueconversation="true" />
      <ConversationAction text="tsm_darkstormynight.2" targettag="player" fadetoblack="true" continueconversation="true" />
      <ConversationAction text="tsm_darkstormynight.3" targettag="player" fadetoblack="true" />
      <AfflictionAction targettag="player" affliction="tsm_darknight" strength="1" multiplybymaxvitality="true" />
      <Label name="eventloop" />
      <WaitAction time="0.5" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.5" />
        </Success>
      </RNGAction>
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.5" />
        </Success>
      </RNGAction>
      <AfflictionAction targettag="player" affliction="tsm_lightthunder" strength="1" multiplybymaxvitality="true" />
      <Label name="eventloop" />
      <WaitAction time="0.2" />
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.5" />
        </Success>
      </RNGAction>
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.5" />
        </Success>
      </RNGAction>
      <AfflictionAction targettag="player" affliction="tsm_darknight" strength="0.1" />
      <WaitAction time="10" />
      <GoTo name="eventloop" />
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_darkstormynight_overvoltage">
      <TagAction criteria="itemtag:battery" tag="targetbattery" submarinetype="player" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="targetbattery">
        <StatusEffect target="This" charge="-100" duration="3" />
      </StatusEffectAction>
    </ScriptedEvent>
    <!--干扰-->
    <ScriptedEvent identifier="tsm_darkstormynight_radio">
      <TagAction criteria="itemtag:mobileradio" tag="radio" continueifnotargetsfound="true" />
      <Label name="eventloop" />
      <RNGAction chance="0.5">
        <Success>
          <StatusEffectAction targettag="radio">
            <StatusEffect target="This" JamTimer="0.2" setvalue="true" duration="0.1" />
          </StatusEffectAction>
          <WaitAction time="0.3" />
        </Success>
        <Failure>
          <RNGAction chance="0.8">
            <Success>
              <StatusEffectAction targettag="radio">
                <StatusEffect target="This" JamTimer="0.3" setvalue="true" duration="0.1" />
              </StatusEffectAction>
              <WaitAction time="0.4" />
            </Success>
            <Failure>
              <StatusEffectAction targettag="radio">
                <StatusEffect target="This" JamTimer="0.4" setvalue="true" duration="0.1" />
              </StatusEffectAction>
              <WaitAction time="0.5" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <RNGAction chance="0.5">
        <Success>
          <WaitAction time="0.1" />
        </Success>
        <Failure>
          <RNGAction chance="0.8">
            <Success>
              <WaitAction time="0.2" />
            </Success>
            <Failure>
              <WaitAction time="0.3" />
            </Failure>
          </RNGAction>
        </Failure>
      </RNGAction>
      <Goto name="eventloop" maxtimes="4" />
    </ScriptedEvent>
    <!--站点突袭-->
    <!--克里斯入组-->
    <ScriptedEvent identifier="tsm_chris_join">
     <CheckDataAction identifier="tsm_chris_join_complete" condition="eq true">
     <Failure>
       <CheckDataAction identifier="tsm_beowulf_complete" condition="eq true">
        <Success>
          <TagAction criteria="player" tag="player" />
          <SpawnAction npcsetidentifier="tsm_npcs_jz" npcidentifier="tsm_chris" targettag="tsm_chris" spawnlocation="Outpost" targetmoduletags="airlock" />
          <StatusEffectAction targettag="tsm_chris">
            <StatusEffect target="This" enabledespawn="true">
              <Affliction identifier="tsm_chris_ondead" strength="50" />
            </StatusEffect>
          </StatusEffectAction>
          <Label name="tsm_check_beowulf" />
          <TriggerAction target1tag="tsm_chris" target2tag="player" applytotarget1="tsm_chris" applytotarget2="triggerer_player" radius="200" waitforinteraction="true" />
          <ConversationAction targettag="triggerer_player" text="tsm_chris_c1" >
            <Option text="tsm_chris_p1">
              <ConversationAction targettag="triggerer_player" text="tsm_chris_c2" >
                <Option text="tsm_chris_p2">
                  <ConversationAction targettag="triggerer_player" text="tsm_chris_c3" >
                    <Option text="tsm_chris_p3">
                      <CheckItemAction targettag="triggerer_player" itemidentifiers="tsm_beowulf">
                        <Success>
                          <RemoveItemAction targettag="triggerer_player" itemidentifier="tsm_beowulf" />
                          <ConversationAction targettag="triggerer_player" text="tsm_chris_c_e1" >
                            <Option text="tsm_chris_p_e">
                              <ConversationAction targettag="triggerer_player" text="tsm_chris_c_e2"  />
                              <NPCChangeTeamAction npctag="tsm_chris" teamid="Team1" addtocrew="true" />
                              <SetDataAction identifier="tsm_chris_join_complete" value="true" />
                            </Option>
                          </ConversationAction>
                        </Success>
                        <Failure>
                          <ConversationAction targettag="triggerer_player" text="tsm_chris_c_n"/>
                          <GoTo name="tsm_check_beowulf" />
                        </Failure>
                      </CheckItemAction>
                    </Option>
                  </ConversationAction>
                </Option>
              </ConversationAction>
            </Option>
          </ConversationAction>
        </Success>
       <Failure>
       </Failure>
     </CheckDataAction>
     </Failure>
     <Success></Success>
     </CheckDataAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_beowulf_complete_1">
      <TagAction criteria="humanprefabidentifier:beowulf_sl" tag="mission_target" continueifnotargetsfound="true" />
      <StatusEffectAction targettag="mission_target" >
        <StatusEffect target="This" >
          <Affliction identifier="tsm_beowulf_complete" strength="50" />
        </StatusEffect>
      </StatusEffectAction>
    </ScriptedEvent>
    <ScriptedEvent identifier="tsm_beowulf_complete_2" >
      <SetDataAction value="true" identifier="tsm_beowulf_complete" />
      <ConversationAction text="完成" dialogtype="Small" />
    </ScriptedEvent>
  </EventPrefabs>
  <EventSet identifier="tsm_ars" leveltype="outpost"
            locationtype="city,military,base,blockade,survey,excavation,study,lab,clinic,hospital,surgery,hydroponics,biosphere,nourishment,factory" allowatstart="true" minleveldifficulty="0" maxleveldifficulty="100" chooserandom="false" ignorecooldown="true" additive="true" commonness="85">
    <EventSet identifier="tsm_outpostevents_ars" minleveldifficulty="15" maxleveldifficulty="100" allowatstart="true" chooserandom="true" onceperoutpost="true">
      <ScriptedEvent identifier="TSM_convertible_npc" commonness="100" />
    </EventSet>
  </EventSet>
  <EventSet identifier="tsm_blackship" leveltype="outpost"
            locationtype="outpost,city,research,military,mine,colony,settlement,construction,camp,base,blockade,survey,excavation,study,lab,clinic,hospital,surgery,hydroponics,biosphere,nourishment,factory,shipyard,fusion" allowatstart="true" minleveldifficulty="25" maxleveldifficulty="100" chooserandom="false" ignorecooldown="true" additive="true" commonness="50">
    <EventSet identifier="tsm_outpostevents_blackship" minleveldifficulty="20" maxleveldifficulty="50" allowatstart="true" chooserandom="true" onceperoutpost="true">
      <ScriptedEvent identifier="tsm_opdeco_hrflyers_1" commonness="10" />
    </EventSet>
  </EventSet>
  <EventSet identifier="chris_join" leveltype="outpost" allowatstart="true" minleveldifficulty="0" maxleveldifficulty="100" chooserandom="true" ignorecooldown="true" additive="true" selectalways="true" commonness="100">
    <EventSet identifier="chris_join" minleveldifficulty="0" maxleveldifficulty="100" allowatstart="true" chooserandom="true" onceperoutpost="true" eventcount="1" additive="true" selectalways="true"
              locationtype="outpost,city,research,military,mine,colony,settlement,construction,camp,base,blockade,survey,excavation,study,lab,clinic,hospital,surgery,hydroponics,biosphere,nourishment,factory,shipyard,fusion">
      <ScriptedEvent identifier="tsm_chris_join" commonness="100"/>
    </EventSet>
  </EventSet>
</Randomevents>